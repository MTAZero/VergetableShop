GO
	USE MASTER 
GO
	DROP DATABASE VERGETABLE_SHOP
GO
	CREATE DATABASE VERGETABLE_SHOP
GO
	USE VERGETABLE_SHOP
GO
	CREATE TABLE NHANVIEN(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		CHUCVU INT, -- 0 : NHÂN VIÊN, 1 : QUẢN TRỊ VIÊN
		NGAYSINH DATETIME,
		GIOITINH INT, -- 0: NU, 1: NAM
		SDT NVARCHAR(MAX) DEFAULT '',
		EMAIL NVARCHAR(MAX) DEFAULT '',
		QUEQUAN NVARCHAR(MAX) DEFAULT '',
		TAIKHOAN NVARCHAR(MAX) NOT NULL,
		MATKHAU NVARCHAR(MAX) NOT NULL,
		ANH IMAGE
	)
GO
	CREATE TABLE NHACUNGCAP(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX)
	)
GO	
	CREATE TABLE NHASANXUAT(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX)
	)
GO
	CREATE TABLE MATHANG(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		NHACUNGCAPID INT,
			FOREIGN KEY(NHACUNGCAPID) REFERENCES NHACUNGCAP(ID),
		NHASANXUATID INT,
			FOREIGN KEY (NHASANXUATID) REFERENCES NHASANXUAT(ID),
		GIABAN INT,
		NAMXUATBAN INT,
		THONGTINSACH NVARCHAR(MAX) DEFAULT '',
		ANH IMAGE,
		SOLUONG INT
	)
GO
	CREATE TABLE PHIEUNHAP(
		ID INT IDENTITY PRIMARY KEY,
		MAPHIEUNHAP NVARCHAR(MAX),
		NHANVIENID INT,
			FOREIGN KEY (NHANVIENID) REFERENCES NHANVIEN(ID),
		NGAY DATETIME,
		TONGTIEN INT
	)
GO
	CREATE TABLE CHITIETNHAP(
		ID INT IDENTITY PRIMARY KEY,
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		DONGIA INT,
		SOLUONG INT,
		THANHTIEN INT,
		PHIEUNHAPID INT,
			FOREIGN KEY (PHIEUNHAPID) REFERENCES PHIEUNHAP(ID)
	)
GO
	CREATE TABLE HOADON(
		ID INT IDENTITY PRIMARY KEY,
		MAHOADON NVARCHAR(MAX),
		NHANVIENID INT,
			FOREIGN KEY (NHANVIENID) REFERENCES NHANVIEN(ID),
		NGAY DATETIME,
		TONGTIEN INT	
	)
GO
	CREATE TABLE CHITIETHOADON(
		ID INT IDENTITY PRIMARY KEY,
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		DONGIA INT,
		SOLUONG INT,
		THANHTIEN INT,
		HOADONID INT,
			FOREIGN KEY (HOADONID) REFERENCES HOADON(ID)
	)
GO